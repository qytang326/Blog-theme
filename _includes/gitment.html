{% if site.Gitment %}
<div id="container"></div>
<!--改为使用本地文件 注意:不能异步加载gitment.js
<link rel="stylesheet" href="//imsun.github.io/gitment/style/default.css" />
<script type="text/javascript" src="//imsun.github.io/gitment/dist/gitment.browser.js" async="async"></script>
<link rel="stylesheet" href="/css/gitment.min.css" />
-->
<link rel="preload" href="{{ "/css/gitment.min.css" | prepend: site.baseurl }}" as="style" onload="this.rel='stylesheet'" />
<noscript><link rel="stylesheet" href="{{ "/css/gitment.min.css" | prepend: site.baseurl }}" /></noscript>
<script  type="text/javascript" src="/js/gitment.min.js" ></script>

<!-- 10月8日,gitment改用点击加载的方式-->
<div style="text-align:center;">
  <button class="btn" id="load-CommentGitment" onclick="CommentGitment.load();">点击加载评论</button>
</div>
<!-- 整合到 plugin.less -> plugin.css -> Quanyin-global.css
<style type="text/css">
#load-CommentGitment {
    background-color:#FFFFFF;
    padding:9px;
    margin:0 auto;
    position:relative;
    font-size:16px;
    color:#555;
    text-decoration:none;
    border: solid 2px #2D2D2D;
}
</style>
-->
<script>
var CommentGitment = {
    load:function CommentGitment(){
        (function () {
/*        var commet_js= document.createElement('script');commet_js.type = 'text/javascript';commet_js.src ='/js/gitment.min.js';(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(commet_js); */
/*        var commet_css = document.createElement('link');commet_css.rel="preload";commet_css.as="style";commet_css.href="{{ "/css/gitment.min.css" | prepend: site.baseurl }}";commet_css.onload="this.rel='stylesheet'";(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(commet_css); */
        var gitment = new Gitment({
          id: '{{ page.url | replace:'index.html',''| replace:'.html','' |split: "/" | last|downcase }}', /* 页面ID，可选。默认为 location.href */
          owner: '{{site.github_username}}', /* 你的 Github ID */
          repo: '{{site.repo_for_gitment}}', /* 存储评论的 repo */
          title: '{{page.title}}',/*issue页的标题 */
          oauth: {
            client_id: '{{site.oauth_client_id}}', /*你的 client ID */
            client_secret: '{{site.oauth_client_secret}}', /*你的 client secret */
          },
        });
        gitment.render('container');
        }());
    $('#load-CommentGitment').remove(); /*加载后移除按钮 */
      }
  }
</script>


<!--
<script>
var gitment = new Gitment({
  id: '{{ page.url | replace:'index.html',''| replace:'.html','' |split: "/" | last|downcase }}', /* 页面ID，可选。默认为 location.href */
  owner: '{{site.github_username}}', /* 你的 Github ID */
  repo: '{{site.repo_for_gitment}}', /* 存储评论的 repo */
  title: '{{page.title}}',/*issue页的标题 */
  oauth: {
    client_id: '{{site.oauth_client_id}}', /*你的 client ID */
    client_secret: '{{site.oauth_client_secret}}', /*你的 client secret */
  },
});
gitment.render('container');
$('#load-CommentGitment').remove(); /*加载后移除按钮 */
</script>
-->
{% endif %}
