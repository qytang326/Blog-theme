  {{/*
      ## APlayer

      ### Ref:[APlayer](https://github.com/MoePlayer/APlayer)
  
      ### Params:
  
      - `id`
  
        required param
  
      ### Examples:
  
      - Simple
  
        {{% music "3950552" %}}
        {{% music "3950552" "netease" "song" %}}
  
      - Named Params
  
        {{% music id="3950552" %}}
        {{% music id="3950552" type="song" mode="random" server="netease" autoplay="true" %}}
  
  */}}
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/aplayer/1.6.0/APlayer.min.js"></script>	
    <script type="text/javascript" >
        function ready(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}ready(function(){function e(e,t){var a=[],r=e.dataset;a.element=e,a.music=t,a.showlrc=a.music[0].lrc?3:0,a.narrow="true"===r.narrow,a.autoplay="true"===r.autoplay,a.mutex="false"!==r.mutex,a.mode=r.mode||"circulation",a.preload=r.preload||"auto",a.listmaxheight=r.listmaxheight||"340px",a.theme=r.theme||"#e6d0b2",new APlayer(a)}console.log("\n %c Meting 1.1.0 %c https://i-meto.com/ghost-aplayer/ \n\n","color: #fff; background-image: linear-gradient(90deg, rgb(47, 172, 178) 0%, rgb(45, 190, 96) 100%); padding:5px 1px;","background-image: linear-gradient(90deg, rgb(45, 190, 96) 0%, rgb(255, 255, 255) 100%); padding:5px 0;");var t="https://api.i-meto.com/meting/api";"undefined"!=typeof meting_api&&(t=meting_api);var a=document.querySelectorAll(".aplayer");Array.prototype.forEach.call(a,function(a){var r=a.dataset.id;if(r){var n=new XMLHttpRequest;n.open("GET",t+"?server="+a.dataset.server+"&type="+a.dataset.type+"&id="+r+"&r="+Math.random(),!0),n.onload=function(){if(n.status>=200&&n.status<400){var t=JSON.parse(n.responseText);e(a,t)}},n.send()}else{var o=[];o.title=a.dataset.title,o.author=a.dataset.author,o.url=a.dataset.url,o.pic=a.dataset.pic,o.lrc=a.dataset.lrc,e(a,[o])}})});
    </script>
  {{- /* DEFAULTS */ -}}
  {{ $server := "netease" }}
  {{ $type := "song" }}
  {{ $mode := "random" }}
  {{ $autoplay := "true" }}
  {{- if .IsNamedParams -}}
  
    <div class="aplayer post-container" 
        data-id="{{ .Get "id" }}" 
        data-server="{{ or (.Get "server") $server }}" 
        data-type="{{ or (.Get "type") $type }}" 
        data-mode="{{ or (.Get "mode") $mode }}" 
        data-autoplay="{{ or (.Get "autoplay") $autoplay }}" >
    </div>  
  
  {{- else -}}
  
    <div class="aplayer post-container" 
        data-id="{{ .Get 0 }}" 
        data-type="{{ if isset .Params 1 }}{{ .Get 1 }}{{ else }}{{ $type }}{{ end }}" 
        data-server="{{ if isset .Params 2 }}{{ .Get 2 }}{{ else }}{{ $server }}{{ end }}" 
        data-mode="{{ if isset .Params 3 }}{{ .Get 3 }}{{ else }}{{ $mode }}{{ end }}" 
        data-autoplay="{{ if isset .Params 4 }}{{ .Get 4 }}{{ else }}{{ $autoplay }}{{ end }}" >
    </div>  
  {{- end -}}