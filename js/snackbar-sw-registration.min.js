var createSnackbar=(function(){var previous=null;return function(config){var message=config.message,actionText=config.actionText,action=config.action,duration=config.duration;if(previous){previous.dismiss();}
var snackbar=document.createElement('div');snackbar.className='paper-snackbar';snackbar.dismiss=function(){this.style.opacity=0;};var text=document.createTextNode(message);snackbar.appendChild(text);if(actionText){if(!action){action=snackbar.dismiss.bind(snackbar);}
var actionButton=document.createElement('button');actionButton.className='action';actionButton.innerHTML=actionText;actionButton.addEventListener('click',action);snackbar.appendChild(actionButton);}
setTimeout(function(){if(previous===this){previous.dismiss();}}.bind(snackbar),duration||5000);snackbar.addEventListener('transitionend',function(event,elapsed){if(event.propertyName==='opacity'&&this.style.opacity==0){this.parentElement.removeChild(this);if(previous===this){previous=null;}}}.bind(snackbar));previous=snackbar;document.body.appendChild(snackbar);getComputedStyle(snackbar).bottom;snackbar.style.bottom='0px';snackbar.style.opacity=1;};})();function handleRegistration(registration){console.log('Service Worker Registered. ',registration);registration.onupdatefound=(e)=>{const installingWorker=registration.installing;installingWorker.onstatechange=(e)=>{if(installingWorker.state!=='installed')return;if(navigator.serviceWorker.controller){console.log('SW is updated');}else{console.log('A Visit without previous SW');createSnackbar({message:'App ready for offline use.',duration:3000});}};};}
if(navigator.serviceWorker){navigator.serviceWorker.register('/sw.min.js').then((registration)=>handleRegistration(registration)).catch((error)=>{console.log('ServiceWorker registration failed: ',error);});navigator.serviceWorker.onmessage=(e)=>{console.log('SW: SW Broadcasting:',event);const data=e.data;if(data.command=="UPDATE_FOUND"){console.log("UPDATE_FOUND_BY_SW",data);createSnackbar({message:"Content updated.",actionText:"refresh",action:function(e){location.reload();}});}};}